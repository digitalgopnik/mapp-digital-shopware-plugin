<sw-page class="sw-event-action-detail">
    <template #smart-bar-header>
          <h2>{{ identifier }}</h2>
    </template>

    <template #smart-bar-actions>
        <mt-button :routerLink="{ name: 'mapp.event.config.index' }">
              {{ $tc('global.default.cancel') }}
        </mt-button>

        <mt-button-process
              :isLoading="isLoading"
              :processSuccess="isSaveSuccessful"
              variant="primary"
              @update:processSuccess="saveFinish"
              :disabled="isLoading"
              @click.prevent="onSave">
              {{ $tc('sw-product.detail.buttonSave') }}
        </mt-button-process>
    </template>

    <template #content>
        <mt-card-view>
            <mt-card :isLoading="isLoading">
                <sw-container columns="75% 1fr" gap="30px">
                    <mt-text-field
                        v-if="mappEvent"
                        type="text"
                        label="Title"
                        placeholder=""
                        v-model="mappEvent.title"
                        @update:value="onEventTitleUpdate">
                        >
                    </mt-text-field>
                    <mt-switch
                        v-if="mappEvent"
                        label="Active"
                        v-model="mappEvent.active"
                        bordered
                        @update:value="onEventActiveUpdate">
                    </mt-switch>
                </sw-container>


                <sw-single-select
                    v-if="mappEvent && businessEvents"
                    label="Business Event"
                    :options="businessEvents"
                    v-model="mappEvent.eventName"
                    required
                    labelProperty="label"
                    valueProperty="name"
                    @update:value="onEventNameUpdate">

                    <template #selection-label-property="{ item }">
                        <strong>{{ item.label }}</strong> - {{ item.name }}
                    </template>

                    <template #result-label-property="{ item, highlightSearchTerm, labelProperty, searchTerm }">
                        <strong>
                            <sw-highlight-text
                                :text="item.label"
                                :searchTerm="searchTerm">
                            </sw-highlight-text>
                        </strong>
                        {{ item.name }}
                    </template>
                </sw-single-select>

                <sw-multi-select
                    :options="salesChannels"
                    label="Sales Channels"
                    v-model="selectedSalesChannels"
                    labelProperty="name"
                    valueProperty="id"
                    @item-add="onSalesChannelAdd"
                    @item-remove="onSalesChannelRemove"
                />

                <mapp-select
                    v-if="mappEvent"
                    label="Message"
                    entity="message"
                    v-bind:value="mappEvent.messageId"
                    @update:value="mappEvent.messageId = $event">
                </mapp-select>

            </mt-card>
        </mt-card-view>
    </template>
</sw-page>
